<h1 align="center">æˆ‘æ˜¯ä¸€ä¸ªèƒ½è¯†åˆ«ä¸­å›½äºŒä»£èº«ä»½è¯çš„Demo ğŸ‘‹</h1>

## âœ¨ Demo

#### ä¸€ã€å†™åœ¨å¼€å¤´
â€ƒâ€ƒèº«ä»½è¯è¯†åˆ«ï¼Œåˆç§°OCRæŠ€æœ¯ã€‚OCRæŠ€æœ¯æ˜¯å…‰å­¦å­—ç¬¦è¯†åˆ«çš„ç¼©å†™ï¼Œæ˜¯é€šè¿‡æ‰«æç­‰å…‰å­¦è¾“å…¥æ–¹å¼å°†å„ç§ç¥¨æ®ã€æŠ¥åˆŠã€ä¹¦ç±ã€æ–‡ç¨¿åŠå…¶å®ƒå°åˆ·å“çš„æ–‡å­—è½¬åŒ–ä¸ºå›¾åƒä¿¡æ¯ï¼Œå†åˆ©ç”¨æ–‡å­—è¯†åˆ«æŠ€æœ¯å°†å›¾åƒä¿¡æ¯è½¬åŒ–ä¸ºå¯ä»¥ä½¿ç”¨çš„è®¡ç®—æœºè¾“å…¥æŠ€æœ¯ã€‚

â€ƒâ€ƒå› ä¸ºé¡¹ç›®éœ€è¦ï¼Œæ‰€ä»¥è¿™äº›å¤©æŸ¥é˜…äº†ç›¸å…³èµ„æ–™ï¼Œæƒ³åœ¨ç½‘ä¸Šçœ‹çœ‹æœ‰æ²¡æœ‰å¤§ç¥å°è£…çš„ç°æˆçš„demoå¯ä»¥ç”¨ã€‚ä½†æ˜¯æ— æœï¼Œç½‘ä¸Šå…³äºocrè¿™ä¸€å—çš„èµ„æ–™å¾ˆå°‘ï¼Œæ¯”è¾ƒé è°±çš„éƒ½æ˜¯è¦æ”¶è´¹çš„ï¼Œè€Œä¸”ä»·æ ¼ä¹Ÿä¸ä¾¿å®œã€‚ä½†æ˜¯åœ¨å¤©æœï¼Œæ”¶è´¹æ„Ÿè§‰å¿ƒé‡Œä¸çˆ½ï¼Œæ‰€ä»¥å°±å†³å®šè‡ªå·±ç ”ç©¶ä¸€ç•ªã€‚

â€ƒâ€ƒå…ˆä¸Šä¸€ä¸ªæœ€ç»ˆå®ç°çš„æ•ˆæœï¼ˆå¦‚æœmacä¸æ˜¯retainå±å¹•çš„ï¼Œåˆ†è¾¨ç‡ä¼šæœ‰å½±å“ï¼Œéœ€è¦åœ¨çœŸæœºä¸Šè°ƒè¯•ï¼‰

![æœ€ç»ˆå®ç°çš„æ•ˆæœ.gif](http://upload-images.jianshu.io/upload_images/1248713-37d71a75530fc59a.gif?imageMogr2/auto-orient/strip)

#### äºŒã€éœ€è¦ç”¨åˆ°çš„æŠ€æœ¯
æœäº†å¾ˆå¤šèµ„æ–™ï¼Œå‘ç°è¦è¿›è¡Œèº«ä»½è¯å·ç çš„è¯†åˆ«ï¼Œéœ€è¦ç”¨åˆ°ä»¥ä¸‹å‡ ç§æŠ€æœ¯:
- ###### å›¾åƒå¤„ç†æŠ€æœ¯
åŒ…æ‹¬ç°åº¦åŒ–å¤„ç†ï¼ŒäºŒå€¼åŒ–ï¼Œè…èš€ï¼Œè½®å»Šæ£€æµ‹ç­‰ç­‰ã€‚

 1. ```ç°åº¦åŒ–å¤„ç†```ï¼šå›¾ç‰‡ç°åº¦åŒ–å¤„ç†å°±æ˜¯å°†æŒ‡å®šå›¾ç‰‡æ¯ä¸ªåƒç´ ç‚¹çš„RGBä¸‰ä¸ªåˆ†é‡é€šè¿‡ä¸€å®šçš„ç®—æ³•è®¡ç®—å‡ºè¯¥åƒç´ ç‚¹çš„ç°åº¦å€¼ï¼Œä½¿å›¾åƒåªå«äº®åº¦è€Œä¸å«è‰²å½©ä¿¡æ¯ã€‚
 
![ç°åº¦å›¾.png](http://upload-images.jianshu.io/upload_images/1248713-79e2e1d41ad25c05.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

 2. ```äºŒå€¼åŒ–```ï¼šäºŒå€¼åŒ–å¤„ç†å°±æ˜¯å°†ç»è¿‡ç°åº¦åŒ–å¤„ç†çš„å›¾ç‰‡è½¬æ¢ä¸ºåªåŒ…å«é»‘è‰²å’Œç™½è‰²ä¸¤ç§é¢œè‰²çš„å›¾åƒï¼Œä»–ä»¬ä¹‹é—´æ²¡æœ‰å…¶ä»–ç°åº¦çš„å˜åŒ–ã€‚åœ¨äºŒå€¼å›¾ä¸­ç”¨255ä¾¿æ˜¯ç™½è‰²ï¼Œ0è¡¨ç¤ºé»‘è‰²ã€‚
 
![äºŒå€¼å›¾.png](http://upload-images.jianshu.io/upload_images/1248713-74b6012efd2525f4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

 3. ```è…èš€```ï¼šå›¾ç‰‡çš„è…èš€å°±æ˜¯å°†å¾—åˆ°çš„äºŒå€¼å›¾ä¸­çš„é»‘è‰²å—è¿›è¡Œæ”¾å¤§ã€‚å³è¿æ¥å›¾ç‰‡ä¸­ç›¸é‚»é»‘è‰²åƒç´ ç‚¹çš„å…ƒç´ ã€‚é€šè¿‡è…èš€å¯ä»¥æŠŠèº«ä»½è¯ä¸Šçš„èº«ä»½è¯å·ç è¿æ¥åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªçŸ©å½¢åŒºåŸŸã€‚
 
![è…èš€å›¾.png](http://upload-images.jianshu.io/upload_images/1248713-41959874f87fd06d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

 4. ```è½®å»Šæ£€æµ‹```ï¼šå›¾ç‰‡ç»è¿‡è…èš€æ“ä½œåç›¸é‚»ç‚¹ä¼šè¿æ¥åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªå¤§çš„åŒºåŸŸï¼Œè¿™ä¸ªæ—¶å€™é€šè¿‡è½®å»Šæ£€æµ‹å°±å¯ä»¥æŠŠæ¯ä¸ªå¤§çš„åŒºåŸŸæ‰¾å‡ºæ¥ï¼Œè¿™æ ·å°±å¯ä»¥å®šä½åˆ°èº«ä»½è¯ä¸Šé¢å·ç çš„åŒºåŸŸã€‚
 
![è½®å»Šå›¾.png](http://upload-images.jianshu.io/upload_images/1248713-bfb20df29a04730a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- ###### æ–‡å­—è¯†åˆ«æŠ€æœ¯
é€šè¿‡è¯†åˆ«å›¾åƒï¼Œå°†å›¾åƒä¿¡æ¯è½¬åŒ–ä¸ºå¯ä»¥ä½¿ç”¨çš„è®¡ç®—æœºè¾“å…¥æŠ€æœ¯ã€‚æ¯”å¦‚ä¸‹é¢è¿™å¼ åŒ…å«ä¸€ä¸²æ•°å­—çš„å›¾ç‰‡ï¼Œé€šè¿‡ocrè¯†åˆ«æŠ€æœ¯å¯ä»¥å°†å›¾ç‰‡ä¸­åŒ…å«çš„æ•°å­—ä¿¡æ¯ä»¥å­—ç¬¦ä¸²çš„æ–¹å¼è¾“å‡ºã€‚

![åŒ…å«æ•°å­—çš„å›¾ç‰‡.png](http://upload-images.jianshu.io/upload_images/1248713-8b9199aed071b13e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
 
#### ä¸‰ã€å¼€æºæ¡†æ¶OpenCVå’ŒTesseractOCRiOS
- ###### OpenCVï¼ˆå®Œæˆå›¾åƒå¤„ç†æŠ€æœ¯ï¼‰
â€ƒâ€ƒOpenCVæ˜¯ä¸€ä¸ªå¼€æºçš„è·¨å¹³å°è®¡ç®—æœºè§†è§‰å’Œæœºå™¨å­¦ä¹ åº“ï¼Œé€šä¿—ç‚¹çš„è¯´ï¼Œå°±æ˜¯ä»–ç»™è®¡ç®—æœºæä¾›äº†ä¸€åŒçœ¼ç›ï¼Œä¸€åŒå¯ä»¥ä»å›¾ç‰‡ä¸­è·å–ä¿¡æ¯çš„çœ¼é•œï¼Œä»è€Œå®Œæˆäººè„¸è¯†åˆ«ã€èº«ä»½è¯è¯†åˆ«ã€å»çº¢çœ¼ã€è¿½è¸ªç§»åŠ¨ç‰©ä½“ç­‰ç­‰çš„å›¾åƒç›¸å…³çš„åŠŸèƒ½ã€‚[opencvå®˜ç½‘](http://opencv.org/)

- ###### TesseractOCRiOSï¼ˆå®Œæˆæ–‡å­—è¯†åˆ«æŠ€æœ¯ï¼‰
â€ƒâ€ƒTesseractæ˜¯ç›®å‰å¯ç”¨çš„æœ€å‡†ç¡®çš„å¼€æºOCRå¼•æ“ï¼Œå¯ä»¥è¯»å–å„ç§æ ¼å¼çš„å›¾ç‰‡å¹¶å°†ä»–ä»¬è½¬æ¢æˆå„ç§è¯­è¨€æ–‡æœ¬ã€‚è€ŒTesseractOCRiOSåˆ™æ˜¯é’ˆå¯¹iOSå¹³å°å°è£…çš„Tesseractå¼•æ“åº“ã€‚

#### å››ã€å®æˆ˜æ¼”ç¤º
- ###### åˆ›å»ºä¸€ä¸ªiOSé¡¹ç›®
- ###### ç”¨CocoPodså¯¼å…¥ä¸Šé¢ä¸¤ä¸ªåº“
ç”±äºOpenCVåº“æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æ—¶é—´ä¼šç¨å¾®ä¹…ä¸€ç‚¹ï¼Œè€å¿ƒç­‰å¾…å°±æ˜¯ã€‚

![podfileæ–‡ä»¶.png](http://upload-images.jianshu.io/upload_images/1248713-32c649f05acf5d64.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- ###### å¯¼å…¥å®Œæˆä¹‹åè¿è¡Œé¡¹ç›®ï¼Œä¼šå‘ç°æŠ¥å¦‚ä¸‹é”™è¯¯

![BitodeæŠ¥é”™.png](http://upload-images.jianshu.io/upload_images/1248713-296ca01578ad6c92.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ç”±äºå¯¼å…¥çš„åº“ä¸æ”¯æŒBitcodeæœºåˆ¶ï¼Œéœ€è¦å…³æ‰ï¼Œåœ¨å·¥ç¨‹->TARGETS->Build Setting-> Enable Bitcodeè®¾ç½®ä¸ºNOå°±okã€‚

![å…³æ‰Bitcode.png](http://upload-images.jianshu.io/upload_images/1248713-4d2b784bc23a6837.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- ###### å¯¼å…¥TesseractOCRiOSéœ€è¦çš„è¯­è¨€åŒ…
â€ƒâ€ƒTesseractOCRiOSåº“ä¸­æ²¡æœ‰è‡ªå¸¦çš„è¯­è¨€åŒ…ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨å¯¼å…¥ï¼Œæˆ‘ä»¬è¿™é‡Œç›´æ¥åˆ°[tesseract-ocr](https://github.com/tesseract-ocr)ç½‘ç«™ï¼Œtessdataå³æ˜¯æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„è¯­è¨€åŒ…ã€‚ä¸‹è½½ä¸‹æ¥çš„è¯­è¨€åŒ…æœ‰400å¤šå…†ã€‚è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ç”¨åˆ°è‹±è¯­è¯­è¨€åŒ…ï¼Œæ‰€ä»¥å°±åªå¯¼å…¥eng.traineddataå°±okï¼Œå…¶ä»–çš„éƒ½åˆ æ‰ã€‚

å¯¼å…¥è¯­è¨€åŒ…ç§éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š
 1. è¯­è¨€åŒ…éœ€è¦æ”¾åœ¨tessdataç›®å½•ä¸‹ã€‚TesseractOCRiOSä¸­æŸ¥æ‰¾è¯­è¨€åŒ…æ˜¯åœ¨tessdataç›®å½•ä¸‹è¿›è¡ŒæŸ¥æ‰¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å•ç‹¬æŠŠeng.traineddataå¯¼å…¥é¡¹ç›®ä¸­ï¼Œè€Œéœ€è¦æ”¾åœ¨tessdataç›®å½•ä¸‹å¯¼å…¥é¡¹ç›®ä¸­ã€‚
 2. å°†tessdataå¯¼å…¥xcodeé¡¹ç›®ï¼Œéœ€è¦å‹¾é€‰Create folder refrencesã€‚ä¸Šé¢å·²ç»æåˆ°äº†è¯­è¨€åŒ…éœ€è¦æ”¾åœ¨tessdataç›®å½•ä¸‹ï¼Œæ‰€ä»¥å¯¼å…¥æ–‡ä»¶åˆ°xcodeçš„æ—¶å€™éœ€è¦åˆ›å»ºæ–‡ä»¶å¤¹çš„å½¢å¼ï¼Œè€Œä¸æ˜¯åˆ›å»ºç»„çš„å½¢å¼ã€‚å¦‚ä¸‹å›¾ï¼š

![å¯¼å…¥tessdataæ–‡ä»¶å¤¹çš„æ–¹å¼.png](http://upload-images.jianshu.io/upload_images/1248713-68f07dd7d28ec043.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- ###### åˆ›å»ºä¸€ä¸ªRecogizeCardManagerç”¨æ¥ç®¡ç†èº«ä»½è¯è¯†åˆ«ç›¸å…³çš„ä»£ç ã€‚
ç”±äºOpenCVå’ŒTesseractOCRiOSåº“éƒ½æ˜¯åŸºäºc++ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦æŠŠRecogizeCardManager.måç¼€çš„.mæ”¹æˆ.mm

![RecogizeCardManager.png](http://upload-images.jianshu.io/upload_images/1248713-c4cc50713f3e0340.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- ###### RecogizeCardManagerä¸­çš„ä»£ç 

###### .hæ–‡ä»¶
```
#import <Foundation/Foundation.h>
@class UIImage;

typedef void (^CompleateBlock)(NSString *text);

@interface RecogizeCardManager : NSObject
  
/**
*Â  åˆå§‹åŒ–ä¸€ä¸ªå•ä¾‹
*
*Â  @return è¿”å›ä¸€ä¸ªRecogizeCardManagerçš„å®ä¾‹å¯¹è±¡
*/
+ (instancetype)recognizeCardManager;

/**
*Â  æ ¹æ®èº«ä»½è¯ç…§ç‰‡å¾—åˆ°èº«ä»½è¯å·ç 
*
*Â  @param cardImage ä¼ å…¥çš„èº«ä»½è¯ç…§ç‰‡
*Â  @param compleate è¯†åˆ«å®Œæˆåçš„å›è°ƒ
*/
- (void)recognizeCardWithImage:(UIImage *)cardImage compleate:(CompleateBlock)compleate;

@end 
```

###### .mæ–‡ä»¶
```
#import "RecogizeCardManager.h"
#import <opencv2/opencv.hpp>
#import <opencv2/imgproc/types_c.h>
#import <opencv2/imgcodecs/ios.h>
#import <TesseractOCR/TesseractOCR.h>

@implementation RecogizeCardManager

+ (instancetype)recognizeCardManager {
Â  Â  static RecogizeCardManager *recognizeCardManager = nil;
Â  Â  static dispatch_once_t onceToken;
Â  Â  dispatch_once(&onceToken, ^{
Â  Â  Â  Â  recognizeCardManager = [[RecogizeCardManager alloc] init];
Â  Â  });
Â  Â  return recognizeCardManager;
}

- (void)recognizeCardWithImage:(UIImage *)cardImage compleate:(CompleateBlock)compleate {
Â  Â  //æ‰«æèº«ä»½è¯å›¾ç‰‡ï¼Œå¹¶è¿›è¡Œé¢„å¤„ç†ï¼Œå®šä½å·ç åŒºåŸŸå›¾ç‰‡å¹¶è¿”å›
Â  Â  UIImage *numberImage = [self opencvScanCard:cardImage];
Â  Â  if (numberImage == nil) {
Â  Â  Â  Â  compleate(nil);
Â  Â  }
Â  Â  //åˆ©ç”¨TesseractOCRè¯†åˆ«æ–‡å­—
Â  Â  [self tesseractRecognizeImage:numberImage compleate:^(NSString *numbaerText) {
Â  Â  Â  Â  compleate(numbaerText);
Â  Â  }];
}

//æ‰«æèº«ä»½è¯å›¾ç‰‡ï¼Œå¹¶è¿›è¡Œé¢„å¤„ç†ï¼Œå®šä½å·ç åŒºåŸŸå›¾ç‰‡å¹¶è¿”å›
- (UIImage *)opencvScanCard:(UIImage *)image {
Â Â  Â 
Â  Â  //å°†UIImageè½¬æ¢æˆMat
Â  Â  cv::Mat resultImage;
Â  Â  UIImageToMat(image, resultImage);
Â  Â  //è½¬ä¸ºç°åº¦å›¾
Â  Â  cvtColor(resultImage, resultImage, cv::COLOR_BGR2GRAY);
Â  Â  //åˆ©ç”¨é˜ˆå€¼äºŒå€¼åŒ–Â 
Â  Â  cv::threshold(resultImage, resultImage, 100, 255, CV_THRESH_BINARY);
Â  Â  //è…èš€ï¼Œå¡«å……ï¼ˆè…èš€æ˜¯è®©é»‘è‰²ç‚¹å˜å¤§ï¼‰
Â  Â  cv::Mat erodeElement = getStructuringElement(cv::MORPH_RECT, cv::Size(26,26));
Â  Â  cv::erode(resultImage, resultImage, erodeElement);
Â  Â  //è½®å»Šæ£€æµ‹Â 
Â  Â  std::vector<std::vector<cv::Point>> contours;//å®šä¹‰ä¸€ä¸ªå®¹å™¨æ¥å­˜å‚¨æ‰€æœ‰æ£€æµ‹åˆ°çš„è½®å»Š
Â  Â  cv::findContours(resultImage, contours, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, cvPoint(0, 0));
Â  Â  //å–å‡ºèº«ä»½è¯å·ç åŒºåŸŸ
Â  Â  std::vector<cv::Rect> rects;
Â  Â  cv::Rect numberRect = cv::Rect(0,0,0,0);
Â  Â  std::vector<std::vector<cv::Point>>::const_iterator itContours = contours.begin();
Â  Â  for ( ; itContours != contours.end(); ++itContours) {
Â  Â  Â  Â  cv::Rect rect = cv::boundingRect(*itContours);
Â  Â  Â  Â  rects.push_back(rect);
Â  Â  Â  Â  //ç®—æ³•åŸç†
Â  Â  Â  Â  if (rect.width > numberRect.width && rect.width > rect.height * 5) {
Â  Â  Â  Â  Â  Â  numberRect = rect;
Â  Â  Â  Â  }
Â  Â  } Â  Â 
Â  Â  //èº«ä»½è¯å·ç å®šä½å¤±è´¥
Â  Â  if (numberRect.width == 0 || numberRect.height == 0) {
Â  Â  Â  Â  return nil;
Â  Â  }
Â  Â  //å®šä½æˆåŠŸæˆåŠŸï¼Œå»åŸå›¾æˆªå–èº«ä»½è¯å·ç åŒºåŸŸï¼Œå¹¶è½¬æ¢æˆç°åº¦å›¾ã€è¿›è¡ŒäºŒå€¼åŒ–å¤„ç†
Â  Â  cv::Mat matImage;
Â  Â  UIImageToMat(image, matImage);
Â  Â  resultImage = matImage(numberRect);
Â  Â  cvtColor(resultImage, resultImage, cv::COLOR_BGR2GRAY);
Â  Â  cv::threshold(resultImage, resultImage, 80, 255, CV_THRESH_BINARY);
Â  Â  //å°†Matè½¬æ¢æˆUIImage
Â  Â  UIImage *numberImage = MatToUIImage(resultImage);
Â  Â  return numberImage;
}

//åˆ©ç”¨TesseractOCRè¯†åˆ«æ–‡å­—
- (void)tesseractRecognizeImage:(UIImage *)image compleate:(CompleateBlock)compleate {
Â Â  Â 
Â  Â  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
Â  Â  Â  Â  G8Tesseract *tesseract = [[G8Tesseract alloc] initWithLanguage:@"eng"];
Â  Â  Â  Â  tesseract.image = [image g8_blackAndWhite];
Â  Â  Â  Â  tesseract.image = image;
Â  Â  Â  Â  // Start the recognition
Â  Â  Â  Â  [tesseract recognize];
Â  Â  Â  Â  //æ‰§è¡Œå›è°ƒ
Â  Â  Â  Â  compleate(tesseract.recognizedText);
Â  Â  });
}
```
- ###### RecognizeCardViewControllerä»£ç 

###### æ•…äº‹ç‰ˆå¸ƒå±€ç•Œé¢

![æ•…äº‹ç‰ˆå¸ƒå±€ç•Œé¢.png](http://upload-images.jianshu.io/upload_images/1248713-986b4b9b54b36436.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
###### .mæ–‡ä»¶
```
#import "RecognizeCardViewController.h"
#import "RecogizeCardManager.h"

@interface RecognizeCardViewController ()<UINavigationControllerDelegate, UIImagePickerControllerDelegate>{
    UIImagePickerController *imgagePickController;
}

@property (weak, nonatomic) IBOutlet UIImageView *imgView;
@property (weak, nonatomic) IBOutlet UILabel *textLabel;
- (IBAction)cameraAction:(id)sender;
- (IBAction)photoAction:(id)sender;

@end

@implementation RecognizeCardViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    
    self.imgView.contentMode = UIViewContentModeScaleAspectFit;
    
    imgagePickController = [[UIImagePickerController alloc] init];
    imgagePickController.delegate = self;
    imgagePickController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    imgagePickController.allowsEditing = YES;
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//æ‹ç…§
- (IBAction)cameraAction:(id)sender {
    
    //åˆ¤æ–­æ˜¯å¦å¯ä»¥æ‰“å¼€ç…§ç›¸æœº
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        imgagePickController.sourceType = UIImagePickerControllerSourceTypeCamera;
        //è®¾ç½®æ‘„åƒå¤´æ¨¡å¼ï¼ˆæ‹ç…§ï¼Œå½•åˆ¶è§†é¢‘ï¼‰ä¸ºæ‹ç…§
        imgagePickController.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
        [self presentViewController:imgagePickController animated:YES completion:nil];
    } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"æç¤º" message:@"è®¾å¤‡ä¸èƒ½æ‰“å¼€ç›¸æœº" delegate:self cancelButtonTitle:@"çŸ¥é“äº†" otherButtonTitles: nil];
        [alert show];
    }
}

//ç›¸å†Œ
- (IBAction)photoAction:(id)sender {
    imgagePickController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentViewController:imgagePickController animated:YES completion:nil];
}

#pragma mark - UIImagePickerControllerDelegate
//é€‚ç”¨è·å–æ‰€æœ‰åª’ä½“èµ„æºï¼Œåªéœ€åˆ¤æ–­èµ„æºç±»å‹
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary<NSString *,id> *)info{
    NSString *mediaType=[info objectForKey:UIImagePickerControllerMediaType];
    UIImage *srcImage = nil;
    //åˆ¤æ–­èµ„æºç±»å‹
    if ([mediaType isEqualToString:@"public.image"]){
        srcImage = info[UIImagePickerControllerEditedImage];
        self.imgView.image = srcImage;
        //è¯†åˆ«èº«ä»½è¯
        self.textLabel.text = @"å›¾ç‰‡æ’å…¥æˆåŠŸï¼Œæ­£åœ¨è¯†åˆ«ä¸­...";
        [[RecogizeCardManager recognizeCardManager] recognizeCardWithImage:srcImage compleate:^(NSString *text) {
            if (text != nil) {
                self.textLabel.text = [NSString stringWithFormat:@"è¯†åˆ«ç»“æœï¼š%@",text];
            }else {
                self.textLabel.text = @"è¯·é€‰æ‹©ç…§ç‰‡";
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"æç¤º" message:@"ç…§ç‰‡è¯†åˆ«å¤±è´¥ï¼Œè¯·é€‰æ‹©æ¸…æ™°ã€æ²¡æœ‰å¤æ‚èƒŒæ™¯çš„èº«ä»½è¯ç…§ç‰‡é‡è¯•ï¼" delegate:self cancelButtonTitle:@"çŸ¥é“äº†" otherButtonTitles: nil];
                [alert show];
            }
        }];
    }
    [self dismissViewControllerAnimated:YES completion:nil];
}

//è¿›å…¥æ‹æ‘„é¡µé¢ç‚¹å‡»å–æ¶ˆæŒ‰é’®
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
    [self dismissViewControllerAnimated:YES completion:nil];
}

@end
```

#### æ€»ç»“
â€ƒâ€ƒé€šè¿‡ä¸Šé¢çš„å®éªŒï¼Œè¯¥ç¨‹åºå¯¹èº«ä»½è¯è¯†åˆ«çš„æ­£ç¡®ç‡å‡ ä¹å¯ä»¥è¾¾åˆ°90%ï¼Œå‰©ä¸‹çš„10%ä¸»è¦å–å†³äºå›¾åƒçš„é¢„å¤„ç†ï¼Œé¢„å¤„ç†ç¨‹åºæ˜¯æ•´ä¸ªè¯†åˆ«ç³»ç»Ÿçš„å…³é”®æ‰€åœ¨ã€‚è¯¥ç³»ç»Ÿçš„åŸç†åŒæ ·ä¹Ÿé€‚ç”¨äºè·å–èº«ä»½è¯ä¸Šå…¶ä»–çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åº”ç”¨äºé“¶è¡Œå¡ã€è½¦ç‰Œå·ç­‰çš„è¯†åˆ«ã€‚æœ€åé’ˆå¯¹å®ç°çš„æ•ˆæœè¿›è¡Œä¸€æ­¥æ€»ç»“ã€‚
- ###### è¯†åˆ«çš„æ­£ç¡®ç‡
ä¸»è¦å–å†³äºè…èš€ã€å–å‡ºèº«ä»½è¯å·ç åŒºåŸŸï¼ˆè½®å»Šæå–ï¼‰çš„ç®—æ³•è¿™å‡ ä¸ªå…³é”®ç‚¹ã€‚
 1. ```è…èš€ï¼š``` è…èš€çš„å‚æ•°å¾ˆé‡è¦ï¼Œå…³äºè…èš€çš„ä¸€äº›ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  [è…èš€ä¸è†¨èƒ€(Eroding and Dilating)](http://www.opencv.org.cn/opencvdoc/2.3.2/html/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)
 2. ```å–å‡ºèº«ä»½è¯å·ç åŒºåŸŸçš„ç®—æ³•ï¼ˆè½®å»Šæå–ï¼‰ï¼š``` æ‰€æœ‰çš„å¤„ç†éƒ½æ˜¯ä¸ºäº†åœ¨å›¾ç‰‡ä¸­å®šä½åˆ°èº«ä»½è¯å·ç çš„åŒºåŸŸï¼Œè½®å»Šæå–å°±æ˜¯è¿™æ ·ä¸€ä¸ªæ“ä½œã€‚ç­›é€‰è½®å»Šå›¾çš„ç®—æ³•å¾ˆé‡è¦ä½†æ˜¯ä¹Ÿæ˜¯ä¸ªéš¾ç‚¹ã€‚æˆ‘ä»è¿™ç¯‡åšå®¢[iOSèº«ä»½è¯å·ç è¯†åˆ«](http://fengdeng.github.io/2016/08/18/iOS%E5%AE%9E%E7%8E%B0%E8%BA%AB%E4%BB%BD%E8%AF%81%E5%8F%B7%E7%A0%81%E8%AF%86%E5%88%AB/)ä¸­æ‰¾åˆ°äº†æ€è·¯ã€‚è¦æå–èº«ä»½è¯å·ç åŒºåŸŸçš„è½®å»Šï¼Œç®—æ³•çš„åŸç†å°±æ˜¯è¯¥è½®å»Šçš„å®½åº¦æ˜¯æ‰€æœ‰ä¸­æœ€å®½çš„ï¼Œä¸”å®½åº¦çš„é•¿åº¦å¿…é¡»å¤§äºé«˜åº¦çš„5å€ã€‚
ä¸è¿‡è¿™ä¸ªç®—æ³•è¿˜æ˜¯å­˜åœ¨ä¸å°‘é—®é¢˜ã€‚æœ‰çš„æ—¶å€™å¯èƒ½å›¾ç‰‡èƒŒæ™¯æ¯”è¾ƒå¤æ‚ä¼šå½±å“åˆ°è½®å»Šçš„æ£€æµ‹ï¼ŒåŸºäºè¿™ä¸ªé—®é¢˜ï¼š
   - ä¸€æ–¹é¢å¯ä»¥é€šè¿‡å¯¹å›¾ç‰‡çš„é¢„å¤„ç†æ¥è¿›è¡Œä¼˜åŒ–ï¼Œå‡å°‘å¯¹æ£€æµ‹èº«ä»½è¯å·ç åŒºåŸŸçš„å¹²æ‰°
   - ç¬¬äºŒä¸ªæ–¹é¢å°±æ˜¯ä¼˜åŒ–ç®—æ³•ã€‚
- ###### è¯†åˆ«é€Ÿåº¦
ä½¿ç”¨TesseractOCRiOSå¯¹æ¯”è¾ƒæ¸…æ™°çš„æ–‡å­—è¿›è¡Œè¯†åˆ«é€Ÿåº¦æ˜¯æ¯”è¾ƒå¿«çš„ï¼Œæˆ‘è¯•è¿‡ç”¨ä¸€å¼ æœªç»å¤„ç†çš„å†™ç€æ•°å­—çš„å›¾ç‰‡æ¥å¤„ç†ï¼Œè¯†åˆ«é€Ÿåº¦å°äº5sã€‚ä½†ç»è¿‡äºŒå€¼å›¾å¤„ç†ä¹‹åè¯†åˆ«çš„é€Ÿåº¦å°±é™ä½äº†ï¼Œæˆ‘è®¤ä¸ºå¯ä»¥å¯¹äºŒå€¼åŒ–å¤„ç†åçš„å›¾ç‰‡è¿›ä¸€æ­¥å¤„ç†ï¼Œæ¯”å¦‚å¯¹äºŒå€¼å›¾è¿›è¡Œç»†åŒ–æå‡ºéª¨æ¶ï¼Œç„¶ååœ¨å¯¹éª¨æ¶åšå‡åŒ€çš„è†¨èƒ€å¤„ç†ï¼Œè¿™æ ·å¾—åˆ°çš„èº«ä»½è¯å·ç å¯èƒ½ä¼šæ¸…æ™°å¾ˆå¤šã€‚

è¿™é‡Œè´´ä¸Šå‡ ä¸ªå…³äºOpenCVçš„å­¦ä¹ ç½‘ç«™
[OpenCVå®˜æ–¹å­¦ä¹ æ–‡æ¡£](http://brightguo.com/opencv/)
[OpenCVå…¥é—¨æŒ‡å—](http://blog.csdn.net/morewindows/article/category/1291764)
[OPEN CV for iOS](http://blog.csdn.net/column/details/opencvonios.html)
